<!DOCTYPE html>
<html lang="ko">
<head>
        <!-- fullcalender -->
    <link rel="stylesheet" href="{{ url_for('static', filename='fullcalendar-5.11.0/lib/main.css') }}">
<script src="{{url_for('static',filename='fullcalendar-5.11.0/lib/main.js')}}"></script>
            <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <meta charset="UTF-8">
    <title>모닥불 : meetpage</title>
</head>
<style>
   .contents{
        align-items: center;
        text-align: center;
    }

    .contents{
        padding:50px;
        flex-direction: column;
    }

    .meetTitleNav{
        margin-bottom: 30px;
        width:80%;
        justify-content: space-between;
        align-items: center;
        display: flex;
        flex-direction: row;
        align-items: center;
    }

    .meetwrap{
        display: flex;
        align-items: center;
    }
    .meetPic{
        display: flex;
        justify-content: center;
        align-items: center;
        width:50px;
        height: 50px;
        background-color:gray;
        margin-right: 10px;
        border-radius: 50%;
        overflow: hidden;
    }

    .meetPic img{
    width:100%;
    }

    .meetTitleNav h1{
        display: inline-block;
        margin: 0;
    }

    .meetContentsWrap{
        width:80%;
        flex:1 1 0px;
        display:flex;
        align-content: center;
        justify-content: center;
        text-align: center;
        overflow: hidden;
    }

    .meetBoard{
        flex:3 1 0;
        position: relative;
        overflow: hidden;
    }

    .meetBoard #board{
        width: 100%;
        height: 100%;
        background-color: bisque;
        background-image:url("../board.jpg");
        background-size:cover;
        flex-wrap: nowrap;
        overflow: hidden;
    }

    .meetBoard #board button{
        position:absolute;
        bottom:0;
        left:0;
        padding:10px;
        border:0;
        background-color:rgba(0,0,0,0.3);
        color:#fff;
        border-radius:50%;
        margin:10px;
        cursor:pointer;
    }

    .meetBoard #board button:hover{
        background-color:rgba(0,0,0,0.5);
    }

    .draggable{
        position: absolute;
        background-color:#ffe294;
        padding:10px;
        white-space:normal;
        word-break:break-all;
        min-width: 100px;
        min-height:100px;
        filter:drop-shadow(1px 3px 3px rgba(0,0,0,0.3));
    }

    .draggable textarea{
        border: 0;
        resize:none;
        width:100%;
        height:100px;
        padding: 0;
        margin: 0;
        background-color: transparent;
        overflow:inherit;
    }

    .draggable textarea:focus{
        outline:none;
    }

    .meetBoard .members{
        position:absolute;
        top:0;
        left:0;
        background-color:#fff;
        width:100%;
        z-index:2;
    }
    .meetBoard #calender{
        width: 100%;
        height: 100%;
        filter: drop-shadow(0 2px 5px lightgray);
        background-color: white;
    }

    .meetBoard .toggleButtons{
        display:inline-block;
        position: absolute;
        bottom:0;
        right: 0;
        margin: 10px;
        z-index:10;
    }

    #toggleBt i, #membersBt i{
        font-size:1.5rem;
        color:rgba(0,0,0,0.5);

    }

    #toggleBt i:hover, #membersBt i:hover{
        color:rgba(0,0,0,0.8);

    }

    .meetBoard #membersBt, .meetBoard #toggleBt{
        display:inline-block;
        margin-right:10px;
        margin-bottom:3px;
    }

    .profileList{
        display: flex;
    }

    .profileList .subProfile{
        padding-right: 1rem;
        text-align: center;
    }

    .subProfile .profilePic{
        position: relative;
        display: inline-block;
        background-color:gray;
        width:70px;
        height:70px;
        border-radius: 50%;
        overflow: hidden;
    }

.profilePic img{
    width:100%;
}
    .subProfile .subName{
        margin-top: 0.2rem;
        font-size: 0.8rem;
        font-weight: bold;
    }

    .subProfile .subLv{
        font-size:0.5rem;
        color:gray;
    }

    .meetNotice{
        flex:1;
        margin-left:10px;
        background-color: white;
        border: 1px solid lightgray;
        text-align: justify;
        display: flex;
        flex-direction: column;
        position: relative;
    }

    .meetNotice h2{
        margin: 0;
        padding-left: 25px;
        padding-top: 20px;
    }

    .meetNotice h2:after{
        flex-shrink: 0;
        display: block;
        content: '';
        margin-top:15px;
        width:85%;
        height:1px;
        background-color: gainsboro;
    }

    .meetNotice > span {
        display: block;
        text-align: right;
        padding-right: 30px;
        padding-top: 10px;
    }

    .meetNotice .notice{
        height: 100%;
        flex:1;
        overflow-y: scroll;
        text-overflow: ellipsis;
        white-space: normal;
        line-height: 2;
    }

    .meetNotice li{
        text-align: justify;
        list-style:square;
        padding-left: 0;
        padding-right:10px;
    }

        @media(max-width:1000px){
        .meetContentsWrap{
            flex-direction: column;
        }
        .meetNotice{
            margin: 0;
        }
        .meetNotice ul{
            height:100px;

        }
        .meetNotice h2{
            font-size: 1rem;
        }

        .meetNotice > span {
        padding-top: 0;
    }
    .meetNotice .notice ul{
        margin-top:0;
    }
    }

    .meetOption{
        padding:10px;
        background-color:#ff9898;
        border-radius:50px;
        color:#fff;
    }

    .meetOption:link, .meetOption:visited{
        color:#fff;
    }
</style>
<body>
<div class="main container">
       <header class="container">
           <a class="logo" href="/"><img src="{{ url_for('static', filename='logo.png') }}" alt=""></a>
           <nav class="navbar">
               {% if not session['userid'] %}
                    <button style=margin-right:20px;"><a href="/login">로그인</a></button>
               {% else %}
                    {% if session['profile'] %} <!-- 프로필이 있다면 -->
                        <img id="profile" src="../{{session['profile']}}" width="30px"; height="30px"; style="margin-right:5px;border-radius: 50%;">
                    {% endif %}
                    {{session['username']}}님 반갑습니다.
                    <button style="margin-left:20px;margin-right:20px;"><a href="/logout">로그아웃</a></button>
               {% endif %}
           <button class="mypage"><a href="/mypage">mypage</a></button>
           </nav>
        </header>
       <div class="contents conatainer">
           <div class="meetTitleNav">
              <div class="meetwrap">
              <div class="meetPic"><img src="../static/meet_profile/{{meetInfo[0].meet_profile}}"></div>
               <h1 class="meetTitle">{{meetInfo[0].meet_name}}</h1>
               </div>
               <a class="meetOption" href="/meetadmin/{{meetInfo[0]._id}}">모임관리</a>
               <a class="meetOption" href="/write/{{meetInfo[0]._id}}">글쓰기</a>
           </div>
           <div class="meetContentsWrap">
               <div class="meetBoard">
                  <div class="members">
                   <div class="profileList">
                       <div class="subProfile">
                        <div class="profilePic">
                            <img src="" alt="">
                        </div>
                        <div class="subName"><a href="/profile">김수한무거북</a></div>
                        <div class="subLv">Lv.23</div>
                   </div>
                   <div class="subProfile">
                        <div class="profilePic">
                            <img src="" alt="">
                        </div>
                        <div class="subName">내이름</div>
                        <div class="subLv">Lv.23</div>
                   </div>
                </div>
               </div>
                   <div id="board">
                   </div>
                   <div id="calendar">
                   </div>
                   <div id="toggleBt">
                       toggle
                   </div>
                   <div id="membersBt">
                       members
                   </div>
                   <script>
                    $('.members').hide();
                    $('#calendar').hide();
                    $('#toggleBt').click(function(){
                        $('#board').toggle();
                        $('#calendar').toggle();
                    });

                    $('#membersBt').click(function(){
                        $('.members').toggle();
                    });
                   </script>
               </div>
               <div class="meetNotice">
                   <h2>공지사항</h2>
                   <div class="notice">
                       <ul>
                           {% for i in data %}
                           {% if i.meet_name == meetInfo[0].meet_name %}
                                <li>
                                    <a href="/notice/{{meetInfo[0]._id}}/{{i._id}}">{{i.title}}</a>
                                </li>
                           {% endif %}
                           {% endfor %}
                   </ul>
                   </div>

               </div>
           </div>
       </div>
       <div id="chatBt">chatBt</div>
       <div id="chatBox">chatBox
       <div id="chatCloseBt">X</div></div>
       <script>
        $('#chatBox').hide();
        $('#chatBt').click(function(){
            $('#chatBox').show();
        });
        $('#chatCloseBt').click(function(){
            $('#chatBox').hide();
        });
       </script>
    <script>
    $(".meetNotice span").click(function(){
        $(".detailsBg").eq(1).show();
    })
        $(".subProfile").click(function(){
        $(".detailsBg").first().show();
    })
</script>
<script>
      document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'dayGridMonth'
        });
        calendar.render();
      });
</script>
<script>
  var x,y;
  $(function(){
    $("button").on("click",function(e){
      $("<div class='draggable'></div>").prependTo("#board").draggable({containment:'#board'}).on("mouseup" ,function(e){
      x = $(this).position().left;
      y = $(this).position().top;
      console.log(x,y);
    });
    });

   function drag(){
     $('.draggable').draggable({containment:'.board_cnt'}).on("mouseup" ,function(e){
      x = $(this).position().left;
      y = $(this).position().top;
      console.log(x,y);
    });
  };
  });
  </script>
       <div class="footer conatainer">
           <!--팀원이나 간단한 정보들적기, 높이 낮아지면 사라짐-->
        </div>
   </div>
</body>
</html>